module test

struct foo
    bar
    baz
    boo
    #dododo
endstruct

export start

start:
        mov R0 $0
        inc R0

        mov R1 R0
        inc R1

        mov R2 R1
        inc R2

        mov R3 R2
        add R3 $5

        mov R4 R0
        add R4 R3

        mov R5 $0
        sub R5 $1

        mov R6 R5
        sub R6 R3

        new R7 foo

        mov R7(foo.bar) $10
        mov R7(foo.boo) $11
        mov R8 R7(foo.bar)
        mov R9 R7(foo.boo)

        mov R10 $-10
        add R10 $20

        cmp R10 $10
        jne fail
        je success

end:
        exit

test:
        mov R12 $10
        jmp end

fail:
        mov R0 $1010
        jmp test
success:
        mov R11 $1011
        jmp test
